autogenerated = 0
monitor=,preferred,auto,auto


$mod = SUPER
source = ~/.config/theme/colours/hyprland.conf


# hyprland startup
exec-once = systemctl --user start hyprland-session.target
exec-once = waybar
exec-once = wl-clipboard
exec-once = "/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1"
# exec-once = "/usr/lib/polkit-kde-authentication-agent-1"
exec-once = hyprpaper

# autostart applications
# sleep to let waybar come up first
exec-once = sleep 1 && "/usr/bin/mullvad" connect && "/usr/bin/mullvad-vpn" && "/usr/bin/mullvad" reconnect
# sleep to let waybar and mullvad come up first
exec-once = sleep 3 && "/usr/bin/nextcloud" --background


# application exec commands
$terminal = alacritty
$tmux = alacritty --command tmux
$emoji_picker = rofimoji -a print type copy


# env variables
env = XCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,qt5ct

env = GTK_THEME,bpharris
env = ICON_THEME,bpharris


input {
    kb_layout = gb
    kb_variant =
    kb_model =
    kb_options = caps:swapescape
    kb_rules =

    follow_mouse = 1

    touchpad {
        natural_scroll = no
    }

    sensitivity = 0.3
    accel_profile = flat
}


general {
    gaps_in = 4
    gaps_out = 8

    border_size = 1
	no_border_on_floating = false
    col.active_border = rgb(DEDEDE)
    col.inactive_border = rgb(080808)

    layout = master

    allow_tearing = false

	snap {
		enabled = true
		window_gap = 10
		monitor_gap = 10
		border_overlap = true
	}
}


decoration {
    rounding = 4

	active_opacity = 1.0
	inactive_opacity = 1.0
	fullscreen_opacity = 1.0

    blur {
        enabled = true
        size = 3
        passes = 1
    }

	shadow {
		enabled = true
		range = 16
		render_power = 2
		color = rgb(161616)
	}

	dim_inactive = true
	dim_strength = 0.1
	dim_special = 0.1
}


animations {
    enabled = yes

    bezier = overshot, 0.05, 0.9, 0.1, 1.02

    animation = windows, 1, 7, overshot
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default

	animation = layersIn, 1, 2, default, popin 90%
	animation = layersOut, 1, 3, default
}
layerrule = noanim, ^(logout_dialog)$
layerrule = noanim, ^(selection)$


gestures {
    workspace_swipe = off
}


misc {
	enable_swallow = true
	swallow_regex = ^(Alacritty)$
}


binds {
	allow_workspace_cycles = true
	workspace_back_and_forth = false
}


# layouts
dwindle {
    pseudotile = yes
    preserve_split = yes
}

master {
    new_status = master
	smart_resizing = false
}


# No gaps when only
# w[tv1] -- [tiling] [visible count = 1]
workspace = w[tv1], gapsout:0, gapsin:0
workspace = w[tv1], shadow:false
windowrulev2 = bordersize 0, floating:0, onworkspace:w[tv1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[tv1]
# f[1] -- full screen status: maximised
workspace = f[1], gapsout:0, gapsin:0
workspace = f[1], shadow:false
windowrulev2 = bordersize 0, floating:0, onworkspace:f[1]
windowrulev2 = rounding 0, floating:0, onworkspace:f[1]


# fix steam wonky-ness
# env = SDL_VIDEODRIVER,wayland
env = STEAM_USE_DYNAMIC_VRS,1
# windowrulev2 = stayfocused, title:^()$,class:^(steam)$
# windowrulev2 = minsize 1 1, title:^()$,class:^(steam)$


# key binds
# ---------

# spawns
bind = $mod, return, exec, $terminal
bind = $mod, f,      exec, thunar
bind = $mod, p,      exec, pkill wofi || wofi --show drun
bind = $mod, e,      exec, $emoji_picker

bind = $mod shift, w, exec, killall waybar && waybar

# wm controls
bind = $mod shift,     Q, killactive,
bind = $mod shift alt, Q, exit,

bind = $mod shift,    l,      exec, hyprlock
bind =      ctrl alt, delete, exec, wlogout -b 4

bind = $mod,       v, togglefloating,
bind = $mod shift, f, fullscreen

binde = $mod, j, layoutmsg, cyclenext  # might break on dwindle
binde = $mod, k, layoutmsg, cycleprev  # might break on dwindle
bind  = $mod, h, splitratio, -0.05
bind  = $mod, l, splitratio, +0.05

binde = $mod, left,  movefocus, l
binde = $mod, up,    movefocus, u
binde = $mod, down,  movefocus, d
binde = $mod, right, movefocus, r

# wm controls: master layout
bind = $mod, space, layoutmsg, swapwithmaster child, focuswindow, master

bind = $mod alt, j, layoutmsg, rollprev
bind = $mod alt, k, layoutmsg, rollnext

binde = $mod alt, space, layoutmsg, orientationcycle
bind  = $mod alt, c,     layoutmsg, orientationcenter
bind  = $mod alt, l,     layoutmsg, orientationleft
bind  = $mod alt, r,     layoutmsg, orientationright
bind  = $mod alt, t,     layoutmsg, orientationtop
bind  = $mod alt, b,     layoutmsg, orientationbottom


# wm controls: workspaces
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10

bind = $mod shift, 1, movetoworkspace, 1
bind = $mod shift, 2, movetoworkspace, 2
bind = $mod shift, 3, movetoworkspace, 3
bind = $mod shift, 4, movetoworkspace, 4
bind = $mod shift, 5, movetoworkspace, 5
bind = $mod shift, 6, movetoworkspace, 6
bind = $mod shift, 7, movetoworkspace, 7
bind = $mod shift, 8, movetoworkspace, 8
bind = $mod shift, 9, movetoworkspace, 9
bind = $mod shift, 0, movetoworkspace, 10

bind = $mod, tab, workspace, previous

# screenshots
$screenshot_path = $(xdg-user-dir PICTURES)/screenshots/$(date -u "+%Y-%m-%d_%H-%M-%S.png")
bind =      , print, exec, grim               - | tee $screenshot_path | wl-copy
bind = shift, print, exec, grim -g "$(slurp)" - | tee $screenshot_path | wl-copy

# scratch pads
workspace = special:scratchpad_terminal, on-created-empty:[stayfocused]$terminal --title floatlacritty
bind = $mod shift, s, togglespecialworkspace, scratchpad_terminal

workspace = special:scratchpad_htop, on-created-empty:$terminal --title floatlacritty --command htop
bind = $mod shift, h, togglespecialworkspace, scratchpad_htop

workspace = special:scratchpad_btop, on-created-empty:$terminal --title floatlacritty --command btop
bind = $mod shift, b, togglespecialworkspace, scratchpad_btop

workspace = special:scratchpad_keepassxc, on-created-empty:keepassxc
bind = $mod shift, k, togglespecialworkspace, scratchpad_keepassxc

# scratch pad window rules
windowrulev2 = float,title:(floatlacritty)
windowrulev2 = size 1600 900,title:(floatlacritty)
windowrulev2 = center,title:(floatlacritty)
windowrulev2 = stayfocused,title:(floatlacritty)


# media controls
binde = , XF86AudioRaiseVolume, exec, ~/.local/bin/xf86-pulseaudio volume-up
binde = , XF86AudioLowerVolume, exec, ~/.local/bin/xf86-pulseaudio volume-down
binde = , XF86AudioMute,        exec, ~/.local/bin/xf86-pulseaudio toggle-mute
binde = , XF86AudioMicMute,     exec, ~/.local/bin/xf86-pulseaudio toggle-mute-mic

binde = , XF86AudioPlay,        exec, playerctl play-pause
binde = , XF86AudioPause,       exec, playerctl play-pause
binde = , XF86AudioPrev,        exec, playerctl previous
binde = , XF86AudioNext,        exec, playerctl next


# mouse binds
bind = $mod, mouse_up, workspace, e+1
bind = $mod, mouse_down, workspace, e-1

bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

